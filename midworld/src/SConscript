from os import path

Import('baseEnv PREFIX')
Import('SetupSDL SetupCorona SetupAudiere SetupOpenGL')

classes = Split("""
   Application
   BoundsCollisionDetector
   Camera
   CollisionDesc
   GameManager
   GameState
   IntroState
   Jukebox
   MenuState
   Player
   RigidBody
   State
   SoundEffectManager
   SoundManager
   Texture
   cubeGeometry
""")

sources = Split("""
    Main.cpp
""")

headers = Split("""
   CollisionDetector.h
   NullCollisionDetector.h
   SpatialIndex.h
""")

sources.extend(map(lambda n: n + '.cpp', classes))
headers.extend(map(lambda n: n + '.h', classes))

env = baseEnv.Copy()
SetupSDL(env)
SetupCorona(env)
SetupAudiere(env)
SetupOpenGL(env)

programs = [
    env.Program(target = 'midworld', source = sources)
]

env.Install(path.join(PREFIX, 'bin'), programs)

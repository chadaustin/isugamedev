from os import path

Import('baseEnv PREFIX')
Import('SetupSDL SetupCorona SetupAudiere SetupGLText SetupOpenGL')

interfaces = Split("""
   CollisionDetector
   CollisionListener
   Entity
   SpatialIndex
   Weapon
""")

classes = Split("""
   AbstractEntity
   Application
   BaseProjectileWeapon
   BoundsCollisionDetector
   Camera
   CollisionDesc
   CreditsState
   Enemy
   GameManager
   GameState
   IntroState
   Jukebox
   MenuState
   Player
   RigidBody
   Shotgun
   State
   StateFactory
   SoundEffectManager
   SoundManager
   SpreadGun
   Texture
   cubeGeometry
""")

sources = Split("""
    Main.cpp
""")

headers = Split("""
   AssaultRifle.h
   BaseBullet.h
   CollisionEvent.h
   NullCollisionDetector.h
   UIDManager.h
   VectorSpatialIndex.h
   Version.h
""")

headers.extend(map(lambda n: n + '.h',    interfaces))
sources.extend(map(lambda n: n + '.cpp',  classes))
headers.extend(map(lambda n: n + '.h',    classes))

env = baseEnv.Copy()
env['LIBPATH'].extend(['#src/AI'])
env['LIBS'].extend(['ai'])
SetupSDL(env)
SetupCorona(env)
SetupAudiere(env)
SetupGLText(env)
SetupOpenGL(env)

programs = [
    env.Program(target = 'midworld', source = sources)
]

env.Install(path.join(PREFIX, 'bin'), programs)

SConscript(dirs = Split('AI'))

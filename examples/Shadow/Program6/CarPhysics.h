//////////////////////////////////////////////////////////////////
// Copyright 2002 Levi VanOort lvanoort@aol.com Released under MIT.
// 
// CarPhysics.h
// 4-4-2002
//////////////////////////////////////////////////////////////////// 


#ifndef __CARPHYSICS_H__
#define __CARPHYSICS_H__

#include "GameObject.h"
#include "Camera.h"
#include <math.h>

class CarPhysics
{
public:
	CarPhysics();

	~CarPhysics();

	////////////////////////////////////////////
	//void SetWheelbase(float TheWheelbase)
	////////////////////////////////////////////
	// Notes:
	//	Used to set length from front to back 
	//	wheels of vehicle
	////////////////////////////////////////////
	void SetWheelbase(float TheWheelbase);
	
	/////////////////////////////////////////////
	// void SetCarTires(GameObject* Tires);
	/////////////////////////////////////////////
	// Notes:
	//	Gives the Physics engine a pointer to the
	//	tires so it can manipulate them
	/////////////////////////////////////////////
	void SetCarTires(GameObject* Tires);

	/////////////////////////////////////////////
	// void SetVehicle(GameObject* TheVehile)
	/////////////////////////////////////////////
	// Notes:
	//	Gives the Physics engine a pointer to the
	//	vehicle it will be calculating physics
	//	on.
	/////////////////////////////////////////////
	void SetVehicle(GameObject* TheVehicle);
	
	/////////////////////////////////////////////
	// void SetAccel(float TheAccel)
	/////////////////////////////////////////////
	// Notes:
	//	Sets Acceleration of the vehicle
	/////////////////////////////////////////////
	void SetAccel(float TheAccel);

	/////////////////////////////////////////////
	// void IncrementAccel(float IncrementAmount)
	/////////////////////////////////////////////
	// Notes:
	//	Increments acceleration by given amount
	/////////////////////////////////////////////
	void IncrementAccel(float IncrementAmount);

	/////////////////////////////////////////////
	// void IncrementWheelAngle(float IncrementAmount);
	/////////////////////////////////////////////
	// Notes:
	//	Increments wheelAngle by given amount
	/////////////////////////////////////////////
	void IncrementWheelAngle(float IncrementAmount);

	/////////////////////////////////////////////
	// void SetWheelAngle
	/////////////////////////////////////////////
	// Notes:
	//	Sets Wheel angle to given value
	/////////////////////////////////////////////
	void SetWheelAngle(float TheAngle);

	/////////////////////////////////////////////
	// void AttachCamera(Camera* CameraToAttach);
	/////////////////////////////////////////////
	// Notes:
	//	Attachs given Camera to vehicle.  This
	//  allows camera to move with object.
	/////////////////////////////////////////////
	void AttachCamera(Camera* CameraToAttach);

	/////////////////////////////////////////////
	// void DetachCamera()
	/////////////////////////////////////////////
	// Notes:
	//	Detaches currently Attached Camera
	/////////////////////////////////////////////
	void DetachCamera();

	/////////////////////////////////////////////
	// void Update()
	/////////////////////////////////////////////
	// Notes:
	//	Does all calculations and updates vehicle
	/////////////////////////////////////////////
	void Update();

private:
	GameObject* TheTruck, *TheTires;
	int dt, Starttime, Stoptime;
	float WheelAngle, Accel, OldVelocity, Velocity, Wheelbase, TruckAngle;
	Camera* TheCamera;
	bool CameraAttached;

};
#endif
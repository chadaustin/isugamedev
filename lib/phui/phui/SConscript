from os import path

Import('env PREFIX')

classes = Split("""
   Button
   CheckBox
   Font
   FontRenderer
   FontRendererCache
   Insets
   Label
   LayoutManager
   ListBox
   Rect
   RootFactory
   RootWidget
   Size
   TextField
   Widget
   WidgetContainer
   Window
   layout/LayoutCodec
""")

sources = []

headers = Split("""
   ActionListener.h
   Color.h
   Input.h
   LayoutConstraint.h
   ListSelectionListener.h
   Point.h
   WindowAdapter.h
   WindowListener.h
   phui.h
   phuiCommon.h
""")

# extra bridge headers
headers.extend(Split("""
   SDLBridge.h
   GLUTBridge.h
"""))

sources.extend(map(lambda n: n + '.cpp', classes))
headers.extend(map(lambda n: n + '.h',   classes))

e = env.Copy(LIBS = ['cppdom'])

libraries = []
libraries.append(e.SharedLibrary(target = 'phui', source = sources))
libraries.append(e.SharedLibrary(target = 'phuiSDL',  source = 'SDLBridge.cpp'))
libraries.append(e.SharedLibrary(target = 'phuiGLUT', source = 'GLUTBridge.cpp'))

for h in headers:
    e.Install(path.join(PREFIX, 'include', 'phui'), h)
    
e.Install(path.join(PREFIX, 'lib'), libraries)

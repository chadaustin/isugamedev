# build with 'scons'
# see doc/build.txt

import sys
import os
import string


Default('.')        # build everything by default


# find libraries
execfile('glut_libs.py')
FONT_LIBS = ['gltt', 'ttf']
Export('GLUT_LIBS FONT_LIBS')


# get install prefix for install target
PREFIX = '/usr/local'
if ARGUMENTS.get('prefix'):
   PREFIX = ARGUMENTS['prefix']
Export('PREFIX')


# create the base environment
base_env = Environment(CPPPATH = ['#', '#phui'],
                       ENV = os.environ,
                       CXXFLAGS = ['-Wall'])


BuildDir('build/release', '.', 0)
BuildDir('build/debug',   '.', 0)

# RELEASE BUILD
env = base_env.Copy(LIBPATH = '#build/release/phui')
Export('env')

SConscript('build/release/phui/SConscript')
SConscript('build/release/examples/SConscript')

# DEBUG BUILD
env = base_env.Copy(LIBPATH = '#build/debug/phui',
                    CXXFLAGS = base_env['CXXFLAGS'] + ['-g'])
Export('env')

SConscript('build/debug/phui/SConscript')
SConscript('build/debug/phui/SConscript')


# install target
env.Alias('install', PREFIX)
